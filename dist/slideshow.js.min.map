{"version":3,"sources":["div-slide/src/slideshow.js"],"names":["Slideshow","_ref","_this","this","_ref$container","container","_ref$slideshowSelecto","slideshowSelector","_ref$slideSelector","slideSelector","_ref$currentSelector","currentSelector","_ref$duration","duration","_ref$cycle","cycle","_ref$swipe","swipe","_ref$throwsSlideIndex","throwsSlideIndexError","document","querySelector","HTMLElement","Error","that","slideshowClass","substr","currentClass","classList","contains","add","slides","querySelectorAll","current","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","slide","value","err","return","swipeHandler","SwipeEvent","element","itemSelector","activeSelector","interval","window","Interval","callback","ms","start","navigateSlide","dir","arguments","length","cycleState","setCurrentSlide","keepInBound","getSlideIndex","index","Array","prototype","indexOf","call","remove","prev","oldCurrent","prevEvent","CustomEvent","createEvent","initCustomEvent","detail","dispatchEvent","nextEvent","set","Math","abs","concat","settedEvent","old","updateSlides","getContainer","getCurrentSlide","getSwipeHandler","getInterval","startInterval"],"mappings":"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","file":"slideshow.js","sourcesContent":["\"use strict\";\n\n/**\r\n * Slideshow that uses pure HTML for each slide element.\r\n *\r\n * @constructor\r\n *\r\n * @param {object} param\r\n * @param {HTMLElement|string} [param.container=\"#slideshow\"] Container of all the slides.\r\n * @param {string} [param.slideshowSelector=\".slideshow\"] Class selector for the slideshow.\r\n * @param {string} [param.slideSelector=\".slide\"] Class selector for all the slides.\r\n * @param {string} [param.currentSelector=\".current\"] Class selector for the current slide.\r\n * @param {number} [param.duration=0]\r\n * @param {boolean} [param.cycle=true]\r\n * @param {boolean} [param.swipe=false]\r\n * @param {boolean} [param.throwsSlideIndexError=false]\r\n *\r\n * @version 1.0.2\r\n *\r\n * @author Gennaro Landolfi <gennarolandolfi@codedwork.it>\r\n */\nfunction Slideshow(_ref) {\n  var _this = this;\n\n  var _ref$container = _ref.container,\n      container = _ref$container === void 0 ? '#slideshow' : _ref$container,\n      _ref$slideshowSelecto = _ref.slideshowSelector,\n      slideshowSelector = _ref$slideshowSelecto === void 0 ? '.slideshow' : _ref$slideshowSelecto,\n      _ref$slideSelector = _ref.slideSelector,\n      slideSelector = _ref$slideSelector === void 0 ? '.slide' : _ref$slideSelector,\n      _ref$currentSelector = _ref.currentSelector,\n      currentSelector = _ref$currentSelector === void 0 ? '.current' : _ref$currentSelector,\n      _ref$duration = _ref.duration,\n      duration = _ref$duration === void 0 ? 0 : _ref$duration,\n      _ref$cycle = _ref.cycle,\n      cycle = _ref$cycle === void 0 ? true : _ref$cycle,\n      _ref$swipe = _ref.swipe,\n      swipe = _ref$swipe === void 0 ? false : _ref$swipe,\n      _ref$throwsSlideIndex = _ref.throwsSlideIndexError,\n      throwsSlideIndexError = _ref$throwsSlideIndex === void 0 ? false : _ref$throwsSlideIndex;\n\n  // Type-checks\n  if (typeof container === 'string') {\n    container = document.querySelector(container);\n  }\n\n  if (!(container instanceof HTMLElement)) {\n    throw new Error('The slideshow container must be a valid DOM element.');\n  } // Shorthand to easily reach `this`.\n\n\n  var that = this; // Class mapping:\n\n  /**\r\n   * CSS class of the slideshow. Applies to container.\r\n   *\r\n   * @constant\r\n   * @type {string}\r\n   *\r\n   * @private\r\n   */\n\n  var slideshowClass = slideshowSelector.substr(1);\n  /**\r\n   * CSS class of the slide. Applies to container.\r\n   *\r\n   * @constant\r\n   * @type {string}\r\n   *\r\n   * @private\r\n   */\n\n  var slideClass = slideSelector.substr(1);\n  /**\r\n   * CSS class for the current slide. Applies to the original selected <div>\r\n   * and the chosen one. Can be applied only to one element at the time.\r\n   *\r\n   * @constant\r\n   * @type {string}\r\n   *\r\n   * @private\r\n   */\n\n  var currentClass = currentSelector.substr(1); // Sets the slideshow class.\n\n  if (!container.classList.contains(slideshowClass)) {\n    container.classList.add(slideshowClass);\n  }\n  /**\r\n   * Gets all the slides.\r\n   *\r\n   * @type {NodeList}\r\n   *\r\n   * @private\r\n   */\n\n\n  var slides = container.querySelectorAll(slideSelector);\n  /**\r\n   * Represents the current element in container.\r\n   *\r\n   * @type {HTMLElement}\r\n   *\r\n   * @private\r\n   */\n\n  var current = function () {\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = slides[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var slide = _step.value;\n\n        if (slide.classList.contains(currentClass)) {\n          return slide;\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return slides[0] || null;\n  }();\n  /**\r\n   * Contains the swipe handler if SwipeEvent is present.\r\n   *\r\n   * @type {SwipeEvent|null}\r\n   *\r\n   * @private\r\n   *\r\n   * @see {@link https://github.com/dencreativityspace/swipe-event|swipe-event}\r\n   */\n\n\n  var swipeHandler = function () {\n    if (swipe && typeof SwipeEvent === 'function') {\n      return new SwipeEvent({\n        element: container,\n        itemSelector: slideSelector,\n        activeSelector: currentSelector\n      });\n    }\n\n    return null;\n  }();\n  /**\r\n   * Contains the interval handler if Interval is present.\r\n   *\r\n   * @type {Interval|null}\r\n   *\r\n   * @private\r\n   *\r\n   * @see {@link https://github.com/dencreativityspace/interval|interval}\r\n   */\n\n\n  var interval = function () {\n    if (duration > 0 && 'Interval' in window) {\n      return new Interval({\n        callback: function callback() {\n          that.next();\n        },\n        ms: duration,\n        start: false\n      });\n    }\n\n    return null;\n  }(); // Private methods\n\n  /**\r\n   * Lets the user navigate through the slideshow.\r\n   *\r\n   * @param {number} [dir=1] Number of elements next or before the current.\r\n   * @param {boolean} [cycleState=cycle] Determines if the counter must cycle.\r\n   *\r\n   * @see setCurrentSlide\r\n   * @see getSlideIndex\r\n   * @see KeepInBound\r\n   *\r\n   * @private\r\n   */\n\n\n  function navigateSlide() {\n    var dir = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    var cycleState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : cycle;\n    setCurrentSlide(slides[keepInBound(getSlideIndex(current) + dir, cycleState)]);\n  }\n  /**\r\n   * Keeps slides index in bound.\r\n   *\r\n   * @param {number} index Index to check if in bound.\r\n   * @param {boolean} [cycleState=cycle] Determines if function have to keep\r\n   * in bound considering the possibility to cycle through the elements.\r\n   *\r\n   * @return {number}\r\n   * @private\r\n   */\n\n\n  function keepInBound(index) {\n    var cycleState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : cycle;\n    return (cycleState && index < 0 ? slides.length + index + slides.length : index) % slides.length;\n  }\n  /**\r\n   * Gets the index of the given slide.\r\n   *\r\n   * @param {HTMLElement} slide\r\n   *\r\n   * @return {number}\r\n   *\r\n   * @private\r\n   */\n\n\n  function getSlideIndex(slide) {\n    return Array.prototype.indexOf.call(slides, slide);\n  }\n  /**\r\n   * Sets the given slide as current.\r\n   *\r\n   * @param {HTMLElement|Node} slide\r\n   *\r\n   * @private\r\n   */\n\n\n  function setCurrentSlide(slide) {\n    if (current != null) {\n      current.classList.remove(currentClass);\n    }\n\n    slide.classList.add(currentClass);\n    current = slide;\n  } // Public methods:\n\n  /**\r\n   * Shows the previous slide.\r\n   *\r\n   * @param   {boolean}   [cycleState]   Determines if the counter must cycle.\r\n   *\r\n   * @emits Slideshow#slideshow:prev\r\n   *\r\n   * @return  {this}\r\n   */\n\n\n  this.prev = function () {\n    var cycleState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : cycle;\n    var oldCurrent = current;\n    navigateSlide(-1, cycleState);\n    var prevEvent = null;\n\n    if (typeof window.CustomEvent !== 'function') {\n      prevEvent = document.createEvent('slideshow:prev');\n      prevEvent.initCustomEvent('slideshow:prev', false, false, {\n        current: current,\n        next: oldCurrent\n      });\n    } else {\n      prevEvent = new CustomEvent('slideshow:prev', {\n        detail: {\n          current: current,\n          next: oldCurrent\n        }\n      });\n    }\n    /**\r\n     * Event triggered when the slideshow gets navigated to the previous element.\r\n     *\r\n     * @event Slideshow#slideshow:prev\r\n     * @type {object}\r\n     * @property {HTMLElement} current - Current slide element in container.\r\n     * @property {HTMLElement} next - Old current slide element in container which succeeds the current.\r\n     */\n\n\n    container.dispatchEvent(prevEvent);\n    return _this;\n  };\n  /**\r\n   * Shows the next slide.\r\n   *\r\n   * @param   {boolean}   [cycleState]   Determines if the counter must cycle.\r\n   *\r\n   * @emits Slideshow#slideshow:next\r\n   *\r\n   * @return  {this}\r\n   */\n\n\n  this.next = function () {\n    var cycleState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : cycle;\n    var oldCurrent = current;\n    navigateSlide(1, cycleState);\n    var nextEvent = null;\n\n    if (typeof window.CustomEvent !== 'function') {\n      nextEvent = document.createEvent('slideshow:next');\n      nextEvent.initCustomEvent('slideshow:next', false, false, {\n        current: current,\n        prev: oldCurrent\n      });\n    } else {\n      nextEvent = new CustomEvent('slideshow:next', {\n        detail: {\n          current: current,\n          prev: oldCurrent\n        }\n      });\n    }\n    /**\r\n     * Event triggered when the slideshow gets navigated to the next element.\r\n     *\r\n     * @event Slideshow#slideshow:next\r\n     * @type {object}\r\n     * @property {HTMLElement} current - Current slide element in container.\r\n     * @property {HTMLElement} prev - Old current slide element in container which precedes the current.\r\n     */\n\n\n    container.dispatchEvent(nextEvent);\n    return _this;\n  };\n  /**\r\n   * Sets the current slide.\r\n   *\r\n   * @param   {string|number|HTMLElement|Node}   slide   Index of the element or the\r\n   *                                          element itself to bet setted as\r\n   *                                          current.\r\n   *\r\n   * @emits Slideshow#slideshow:setted\r\n   *\r\n   * @return  {this}\r\n   *\r\n   * @throws Will throw an error if the argument is null.\r\n   * @throws Will throw an error if the argument isn't a child of the container.\r\n   * @throws Will throw an error if `throwsSlideIndexError` is set to true and if the user tries to go beyond the end-points.\r\n   * @throws Will throw an error if the argument isn't a valid element.\r\n   */\n\n\n  this.set = function (slide) {\n    if (slide == null) {\n      throw new Error('The given element is not a valid value. Please, insert a string, an integer or a DOM element.');\n    }\n\n    if (typeof slide === 'string') {\n      slide = document.querySelector(slide);\n    }\n\n    if (typeof slide === 'number') {\n      if (throwsSlideIndexError) {\n        if (slide > slides.length - 1 || Math.abs(slide) > slides.length - 1) {\n          throw new Error(\"The element #\".concat(slide, \" cannot be found.\"));\n        }\n      } else {\n        slide = keepInBound(slide);\n      }\n\n      slide = slides[slide];\n    } else if (slide instanceof HTMLElement) {\n      if (getSlideIndex(slide) < 0) {\n        throw new Error('The given element is not in this slideshow.');\n      }\n    } else {\n      throw new Error('The given element is not a valid value. Please, insert a string, an integer or a DOM element.');\n    }\n\n    var oldCurrent = current;\n    setCurrentSlide(slide);\n    var settedEvent = null;\n\n    if (typeof window.CustomEvent !== 'function') {\n      settedEvent = document.createEvent('slideshow:setted');\n      settedEvent.initCustomEvent('slideshow:setted', false, false, {\n        current: current,\n        old: oldCurrent\n      });\n    } else {\n      settedEvent = new CustomEvent('slideshow:setted', {\n        detail: {\n          current: current,\n          old: oldCurrent\n        }\n      });\n    }\n    /**\r\n     * Event triggered when the slideshow gets setted on a specific element.\r\n     *\r\n     * @event Slideshow#slideshow:setted\r\n     * @type {object}\r\n     * @property {HTMLElement} current - Current slide element in container.\r\n     * @property {HTMLElement} old - Old current slide element in container.\r\n     */\n\n\n    container.dispatchEvent(settedEvent);\n    return _this;\n  };\n  /**\r\n   * Forces the update of the child list.\r\n   * Useful when browser doesn't support MutationObserver.\r\n   *\r\n   * @return  {this}\r\n   */\n\n\n  this.updateSlides = function () {\n    slides = container.querySelectorAll(slideSelector);\n\n    if (!(current in slides)) {\n      current = slides[0] || null;\n    }\n\n    return _this;\n  };\n  /**\r\n   * Returns the container element.\r\n   *\r\n   * @return  {HTMLElement}\r\n   */\n\n\n  this.getContainer = function () {\n    return container;\n  };\n  /**\r\n   * Returns the current figure element.\r\n   *\r\n   * @return  {HTMLElement|null}\r\n   */\n\n\n  this.getCurrentSlide = function () {\n    return current;\n  };\n  /**\r\n   * Returns the swipe handler instance, if exists.\r\n   *\r\n   * @return  {SwipeEvent|null}\r\n   *\r\n   * @see {@link https://github.com/dencreativityspace/swipe-event|swipe-event}\r\n   */\n\n\n  this.getSwipeHandler = function () {\n    return swipeHandler;\n  };\n  /**\r\n   * Returns the swipe handler instance, if exists.\r\n   *\r\n   * @return  {Interval|null}\r\n   *\r\n   * @see {@link https://github.com/dencreativityspace/interval|interval}\r\n   */\n\n\n  this.getInterval = function () {\n    return interval;\n  };\n\n  if (interval) {\n    interval.startInterval({\n      callback: function callback() {\n        that.next();\n      },\n      ms: duration\n    });\n  }\n}"]}